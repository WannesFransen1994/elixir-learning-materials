# Internationalization

## Gettext

Phoenix uses by default Gettext for translations. It is a GNU project that uses `.po` and `.pot` files to manage its translations. It offers a lot of features, such as plural forms and much more.

You can see a whole list of pluralforms on [this website](https://localization-guide.readthedocs.io/en/latest/l10n/pluralforms.html#f2), but just to show the complexity:

```text
nl  Dutch       nplurals=2; plural=(n != 1);
en  English     nplurals=2; plural=(n != 1);
ja  Japanese    nplurals=1; plural=0;
hr  Croatian    nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);
```

Good thing that Gettext helps us with this. Let's get started.

## Configuring gettext

First we'll start with some basic configuration:

```elixir
config :i18n, I18nWeb.Gettext,
  locales: ~w(en ja), # ja stands for Japanese.
  default_locale: "en"
```

## Change our webpage to use translations

That's all good and well, but in our webpage we still need to use gettext in order to get this translation. First of all our main page:

```html
<!-- index.html.eex -->
<p>
  <%= gettext "Welcome to the world of %{language} and %{framework}!", language: "Elixir", framework: "Phoenix!" %>
</p>
```

Often you'll see the text here completely corresponding with the actual text. This is because the gettext function will by default return the string that's passed in.

### POT files

POT stands for Portable Object Template. These files are automatically generated by `mix gettext.extract`. **Do not edit these files manually!**

When you execute this task, you'll see that there's a new file called `priv/gettext/default.pot`. This file is based on the `gettext` function that you called in your template. Though we'll not add our translations here, we do that in the next section.

### PO files

The Portable Object files are based on the POT files. You'll add your translations here, but in order to do that we'll have to generate them with the task `mix gettext.merge priv/gettext`. Now you should see a `default.po` file which should look like this:

```text
#, elixir-format, fuzzy
#: lib/i18n_web/templates/page/index.html.eex:2
msgid "Welcome to the world of %{language} and %{framework}!"
msgstr ""
```

__Note that the above commands could be run in a single one. This is `mix gettext.extract --merge`.__

### Adding a new language

This gets us started. You can add a new language with `mix gettext.merge priv/gettext --locale ja`. You'll see some new files being added. Next we can add our translation in the `ja/LC_MESSAGES/default.po` file:

```text
#, elixir-format
#: lib/i18n_web/templates/page/index.html.eex:2
msgid "Welcome to the world of %{language} and %{framework}!"
msgstr "「%{language}」と「%{framework}」の世界へようこそ！"
```

If you want to test it out manually, change your default language in your config to `ja`. Fire up your webserver and there you go!

## Remaining files

Next we do the same thing again but for the second page. Adjust the following files and execute the following tasks:

```html
<!-- another_index.html.eex -->
<p>
    <%= gettext "Students from UCLL are so great! They can make a website with %{framework} in English and Japanese!", framework: "Phoenix" %>
</p>
```

```bash
mix gettext.extract --merge
```

The following file is `ja/LC_MESSAGES/default.po` :

```text
#, elixir-format
#: lib/i18n_web/templates/page/another_index.html.eex:2
msgid "Students from UCLL are so great! They can make a website with %{framework} in English and Japanese!"
msgstr "「UCLL」という大学の生徒はすごいです！「%{framework}」で英語と日本語のウェブサイトを作ることができます！"
```

If you've adjusted your default locale to japanese, you should see the translated text!
